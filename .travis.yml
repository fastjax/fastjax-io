# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: R2wOQhR2OelaqSWn0KzQlgQksXUFgdt+gu+9Knwol2zgN6zczn6Gki9ECf7HkDdH/pW6OiVvKRzHmwW4QnTwMUHQWSp6gpM+zdMGECn4WV8WqGxLrHc/siX9dmWIRyuVWtBnP4kRqheD445NH1wNmXUYx3tH4bXX965eAGcpRoUn+gd3M+/yaLXKjcbelIxc5rDT9U4/HA1rXw3zeHJtGma66g6dfj8VUIzpm7ZZJFRksqaC/dqcEb9z1dkp3CSAp4Q4SDlgrP/CNKxgt/REPKZAuf7s9T5i9KeTzT3aTTh1+T722dXc7aMx3U+JZPdH7odRU03vvlgNVdZSRFBEQcVDWU1BHmk8eZJYzyLi8BslP/wbq0IRlTfUQYbdzl6J4s9iMpOPgIhca/4KZ6PWJNWQIsLuA/PePm/SoLkD5UEU172yS6u7RMsgdHvCLh+D+X0R4JYK7KbslR7FQw+U0kfpAJ6BvPAtFY14AJfalDbXrKcK9/si+GR5G9FGvQmyzF2nK4YTEuvoEwvwnjszfgOGr7v3EH01GW08VOJ6/IVuWejh0VFvGy1ml2wb5v1EP3Gf/bhg6u81DojDgSJaa5qN+n2an0apbCvQ04iZw29tBz3Jor24PAx9can6C3cSrLgSinOMVvNckmpdgK1OZokTORPfLn4qAanK6jnBtwM=
  - secure: RAF+arC9G90E6OcU5Kc+rTiDq4gnd6GuvNu0eOuaSRiu5VdhSt1HECTv5i6TsPD4UHvXec2Tgcicr5gmgz6NcY5pcyHVvk4Th/8zztbxdK+G2tZYlsvLlfEQRCkqrPtLYLsIGFfFHMfPEPJdDRehW89d6Wn3dCJYBG1+27GCnXKzj6EGyRTuCmSNGNPFtbl6FS+1ApqlPTiwAZNvxhhFzEKlBciKjqZEFgVYzrGNyJ6VuIJmdxGbBOzib+IlYLX1j9b63J/ZzNxcE/7Dkk3lowUpHWnMzsEoAKEndIO0IpBsGWqqWqByM/w61n1pwUbSOUzU/H5k6mQu/sLyQCnOc2t0RW8jZnwXQe7ttA4uy1o9bpJwE2wSIRfD64mjhscwQu/GAr6vV17qqei5t0c9SGJ2PVsWAizm4MEHm/06q8wsyCnuuznm8X0izQS1WLeHOB5vPGU19Jh7EjNUywoTZzrH7da8bO/mb5/OhvUvpV0TQmH90bPigFWqgLYmt45WpZb2DB4f7Ivizq5jTTQ7k1juz7e2xPwSG7ksMgGgWGT/ycwQUVa2CTkTd/c62LA00M2DQgnQEHGqD5eW47tbVNN1oyoBOTRT2IHay2tsSbVX9i3a5cRJ3bFS59P53qNuDEQWNKtP2kFNj6ZRq+AvDDz9ZoS5Yn4mPKcqEyfUFUM=
  - secure: l7+SB/Z6IrJzOyVbnT5w/v5HdgA9/ceE/Xuu0e7+2Jdjq8D5fCWTbQrkLSTQrSF/6/3gNBn3kwYJ+kyRWkM/VBK6R0QZ66Nf76fEzlltIw3rocOcNla/jFsj0bGf0+bX5z7hUupnGZ6J8Pc45/sFAeU9UDbEM1aTORL6RYPEYBXgb8z/o+xebpaBD6KsJblXah54KebYhrGnz7Eiqpx8jLGh1xOkdMhlI9wXkEm80V56UsczXLXKvyuxNYGi0KE+YzNlIQmUvQtjkKDaH2943VPDzQQD+9YMuk4iXspCj6tutxxTT7YBICDFVZkpGq5oG8wSFRz3CNDDRXX1XEIUp5GEw1n7T8cgjXsu9KbYdl0t47+g0fdLIAkoXTrh8PHkzQFI8hHEl25q0IRzP0QgKshJ5bFm6alBoqGv4g+Y8V6kgyqpk7SzHXC+B/oqvP1+Kie4Lsik8epHwgy9v88vfGbxX+aAHcL48HLhHudps3qWPr19XvwzL+waRrWxemIwr6DpgCWESEmof+dAq4VNYNvZibGW/b1wodHoRNo7/xfKYx8W7l/5mXbNxyJ1WLjwVi3ev5N//LWpq6jeZbvvuc/WKCa3PPM1MBBOnVZ7MoVzWsQN3T7U8/0mynJNQlcR9t7pGqnIac2VsP728By02NYScaCWRnUY60ws1e8nHHI=
  - secure: Rn8J+4Umdk4R9u/ubLSQC5JLOv9DAMC3ozFZ7TIvRG2eFaF2JwvfixEfh6hN3as4IyL9CS3oam3i8HfxCy6vWvpBYUjt8PPhmUw2HQWqiOnV1RpeOteJK+jcZQrJhqxEir0gFwt+7XCC5TVGlN7qEg+CccrkUppp5mcD2VLJOp7jd8zNNH+fwQIzjM+nDyuLKfWxOjvKaipv769VkNw4997WlMKYiT/TCo9OsBixSthZeYB4H6/V//0Z7Xr/8/6BdSww4lbfYwP2lOQr97VshJKbcmUP+vYKD5kg040hPAWH7g9V8xo9XHmgCkg7RMl+WenvtNvU+wX0HnNSDY/gXrRh3evVJ8hk4qhq9niCkx7lJzr6Zk4l4+J0MjF6x6Wq/sxcfQOXc0Kyx2K7fD7e8QhUbM6e+QGhLjbyDKt7SupHBWflc/NDBsGAnAGtz90C5DFtNH1x1DlIkRDobhMJsTVfTIPua3lB0FTS9/M5CtUhdAfUeX73JqKMJ/LfFLlZpO+dgGS+rdviOxmIJs7pICSqihZvvjNzCzvgqjtmV61LpPjY/XzRizF7KtK1QLt3kTsablLc98PIydBX8LkpXqV6Ev2DnIRAUzx5qc4UHA6ecPcwUGchv+F7k2wTdE12nU11CH0YEZAki0T/uU0Wi+kOV++6eS9OIPguZLz9g1E=
  - secure: Wl/D6+NFb8NTQxOxWTFU8yPBDNBdQwinT9MD3SrD7CLBcQ0jv1EIT79+F0VpF+wIHJ4rjfIYVrWwR4g1zbdJx9mrBcel13Jcp2bLCBE1lTJOl3w7ax4h2vr5lRe7HRGwU5kJZtTa6UXO3Ei2P55U/43qteSJgF4nScn8lregnr9ktmNF6Orx81EVD8Z9JbBYq+Z/gHW+azuMZlhzXXBZEoxj4OU0e47rldVYVw+ex7rKrq4bBSw5ou1oVmXH9xXawhLKw/skUrgi9OmAeQy9RnF8XgY2q1ajZ+NrUyzNQXe7zrF2v0ni1H/qWXkMZTgs6Oxo0UWslEh4QiCmMR9UrdiJrizFD9gmv9fKvhUNlOdmBic4ZsLt/yf7s62DheOXE2W/mc52lI6gDOZDkRSoFh+nvioIXgKUtIXbUAPZIKlFaTX+IO26LYeFmtyHSiZcP4pKfM5/mY53e07pWKt9EvyxYdOitXQGPmnV4RyfcIRJdk8dMU9Q3cJ+2uYhEiIJDZGBMfH7x5zoih1jhv4+yfFFzVFCXQ+er5y0dlrzEg/1OkEl2fxFcQYTlSlueZfW9uKcOljJYChuZTHVkDiY9/Eo/8ID1JUlnIPFVlZzD278VbfUp/iTsMdV4uZRWHTeoN4McuWEWrYnwK9eQ25IFTrZs0P3l5B/kdc8TGrLQIo=
  - secure: EaOc6A/aV/KF7fXARejnJgTKeqfPQVRHxQ8X43r0ic0YAb5DYpRIk5ipJDIbw7LFbVW2jwoocdjMDFTtfgBoTPytKLguAHmcUPh0ulO0Hd9/FEPv6VdeLw+E31d9mEmMmxMejyx9B7npLChydgNlGqOGE0LxLFr26jX5nP9G4S/buXRgfj8EqMwn25ghU8mjowBHWeJmQ9QPUmjn4x4cPMOxiP1/cOsvnCrUdB6LZvnHm7nAIepEkgnCexfSPV3aBsllZQO6BnOZ6T3BPS5LVHm2wEKg8BFbXNQVl6H0FN/NkLOSmfv9DlicFQEuW5dU9lNS0BgG8FVB4LGIW+cBz1cdHaWZuslnUrxtbZxZiuYS6iclzyJf0LxLJoo2jCbdgLpf2DJZYrxBNyLdGXw/lRx3rKlqSy9Pje/7X6y+IKcNYrctifWMrV5IAX4pTlSoJrGB13UxpG0Qw6JeoY7GeEH+e91mJuRQQKW12xszjmzyo7i6MeABRfTZV3h+BYuezrvd5/Qy/1RzNNmhM0m+8qJFdhH+a73TQqw0IYPHWsZNmgqRStoPwDu7wKskj7dgBCR0pjSjaEfmqkI4DFCVSlNya3RAdtVdRMm+2Bvj8wtWgtpHMi48EZ15DrF2kKh4lgnOgQkONOAJgJH7rKKkiQOwNe1nC/eeonY8yNTl/i0=
  - secure: QOmeKU+c8Al12q2vy0tcKyrf4AEQ/ZGlbKvKj5hgy2BHTpdOR5i25/Y5VaJnwM8PPCsR0add37xzR39NroSNCxEuP+7PT/CmMW714IhVuIHwqU724Nal4l0FWxUcHS4VnuEFCfC5gYEXnDPcdrR8DL/wRMzurBink79kbRRrunDqbxSFH7tzji0ljs9wNNrUgrlEMiFWVOJvCoWcqAkCFr6/4HLVnpqVVLLfy9RMIzLe2qxUmx4erM2Nmog/3F9uk6z7ECZBJq3DRMtnpLYPctTa58Q6BosjiMHTnNxNczHgPH5cYNjZq2CAkhCgEbnF+CXbL5S7ZRW34FzFnR7XptFFMcr9KvIzYKAZpc7HK1Uf36NUntZr0aP1INtPS8ESpAgnn1BOvhl9nG87zTWlvj9repu9LBBB3gJXy6L10Wuo+xr71r5Gpq4UfD2uZ+p7xlXO0urEfDo6mRWg4yWxpdtowBmnUXUUZhZQKGndHOTdeabL7xlUW0P3razng6QeASOMqug35BdyQz2AnUfBz8sJEM4EuMgTInS88hV5uJnkxKOXVTg2isP1qCfqB6w1jpoDwvU544BOpQsB1N6lIc9pcVj7MfRJVfC07YRM/EhZez4HqBrvUAL1mE7QCp29eP9r6aFJEgXoYV037/sRVAVD/vb3S8dDd4B54PMxfNs=
